
#ifndef GPU_CONST_H
#define GPU_CONST_H

#include <stdint.h>

#define HIST_INIT_BOARD_STATE UINT16_C(             0b0)
#define HIST_ENP_COL          UINT16_C(      0b11100000)
#define HIST_PID_COL          UINT16_C(      0b11100000)
#define HIST_ENP_AVAILABLE    UINT16_C(         0b10000)
#define HIST_ENP_ALL          UINT16_C(      0b11110000)
#define HIST_HALFMOVE_CLOCK   UINT16_C(0b11111100000000)
#define HIST_HALFMOVE_FIFTY   UINT16_C(50 << 8)

#define M_WHITE_KING_START               UINT8_C(60)
#define M_WHITE_KING_SIDE_ROOK_START     UINT8_C(63)
#define M_WHITE_QUEEN_SIDE_ROOK_START    UINT8_C(56)
#define M_WHITE_KING_SIDE_CASTLE_TARGET  UINT8_C(62)
#define M_WHITE_KING_SIDE_ROOK_TARGET    UINT8_C(61)
#define M_WHITE_QUEEN_SIDE_CASTLE_TARGET UINT8_C(58)
#define M_WHITE_QUEEN_SIDE_ROOK_TARGET   UINT8_C(59)

#define M_BLACK_KING_START               UINT8_C(4)
#define M_BLACK_KING_SIDE_ROOK_START     UINT8_C(7)
#define M_BLACK_QUEEN_SIDE_ROOK_START    UINT8_C(0)
#define M_BLACK_KING_SIDE_CASTLE_TARGET  UINT8_C(6)
#define M_BLACK_KING_SIDE_ROOK_TARGET    UINT8_C(5)
#define M_BLACK_QUEEN_SIDE_CASTLE_TARGET UINT8_C(2)
#define M_BLACK_QUEEN_SIDE_ROOK_TARGET   UINT8_C(3)

#define M_WHITE_MIN_ENPASSANT_TARGET UINT8_C(40)
#define M_BLACK_MIN_ENPASSANT_TARGET UINT8_C(16)

#define BB_RIGHT_COL        UINT64_C(0x8080808080808080)
#define BB_LEFT_COL         UINT64_C(0x0101010101010101)
#define BB_RIGHT_TWO_COLS   UINT64_C(0xC0C0C0C0C0C0C0C0)
#define BB_LEFT_TWO_COLS    UINT64_C(0x0303030303030303)
#define BB_TOP_ROW          UINT64_C(0x00000000000000FF)
#define BB_BOTTOM_ROW       UINT64_C(0xFF00000000000000) 
#define BB_FULL             UINT64_C(0xFFFFFFFFFFFFFFFF)
#define BB_EMPTY            UINT64_C(0x0000000000000000)
#define BB_BLACK_PAWN_HOME  UINT64_C(0x000000000000FF00) /* Second-to-top row */
#define BB_WHITE_PAWN_HOME  UINT64_C(0x00FF000000000000) /* Second-to-bottom row */
#define BB_BLACK_PAWN_LINE  UINT64_C(0x00000000FF000000) /* Fourth row from top */
#define BB_WHITE_PAWN_LINE  UINT64_C(0x000000FF00000000) /* Fourth row from bottom */

#define BB_WHITE_KING_SIDE_CASTLE_TARGET  (UINT64_C(1) << M_WHITE_KING_SIDE_CASTLE_TARGET)
#define BB_WHITE_QUEEN_SIDE_CASTLE_TARGET (UINT64_C(1) << M_WHITE_QUEEN_SIDE_CASTLE_TARGET)

#define BB_WHITE_KING_SIDE_CASTLE_OCCUPANCY  UINT64_C(0x6000000000000000)
#define BB_WHITE_QUEEN_SIDE_CASTLE_OCCUPANCY UINT64_C(0x0E00000000000000)
#define BB_WHITE_KING_SIDE_CASTLE_CHECK      UINT64_C(0x7000000000000000)
#define BB_WHITE_QUEEN_SIDE_CASTLE_CHECK     UINT64_C(0x1C00000000000000)

#define BB_BLACK_KING_SIDE_CASTLE_TARGET  (UINT64_C(1) << M_BLACK_KING_SIDE_CASTLE_TARGET)
#define BB_BLACK_QUEEN_SIDE_CASTLE_TARGET (UINT64_C(1) << M_BLACK_QUEEN_SIDE_CASTLE_TARGET)

#define BB_BLACK_KING_SIDE_CASTLE_OCCUPANCY  UINT64_C(0x0000000000000060)
#define BB_BLACK_QUEEN_SIDE_CASTLE_OCCUPANCY UINT64_C(0x000000000000000E)
#define BB_BLACK_KING_SIDE_CASTLE_CHECK      UINT64_C(0x0000000000000070)
#define BB_BLACK_QUEEN_SIDE_CASTLE_CHECK     UINT64_C(0x000000000000001C)

#define GPU_INVALID_MOVE ((gpu_move_t)0b0110111111111111)
#define GPU_INIT_STATE (gpu_hist_ele_t { HIST_INIT_BOARD_STATE, GPU_INVALID_MOVE })

#define GPU_MV_TO_MASK   UINT16_C(0x3F)
#define GPU_MV_FROM_MASK UINT16_C(0x3F << 6)
#define GPU_MV_FLAG_MASK UINT16_C(0xF << 12)

/**
 * Enum holding the different flags that a move can contain
 */
enum {
    GPU_MV_QUIET                =  0 << 12,
    GPU_MV_DOUBLE_PAWN_PUSH     =  1 << 12,
    GPU_MV_KING_SIDE_CASTLE     =  2 << 12,
    GPU_MV_QUEEN_SIDE_CASTLE    =  3 << 12,
    GPU_MV_CAPTURE              =  4 << 12,
    GPU_MV_ENPASSANT            =  5 << 12,
    GPU_MV_KNIGHT_PROMO         =  8 << 12,
    GPU_MV_BISHOP_PROMO         =  9 << 12,
    GPU_MV_ROOK_PROMO           = 10 << 12,
    GPU_MV_QUEEN_PROMO          = 11 << 12,
    GPU_MV_KNIGHT_PROMO_CAPTURE = 12 << 12,
    GPU_MV_BISHOP_PROMO_CAPTURE = 13 << 12,
    GPU_MV_ROOK_PROMO_CAPTURE   = 14 << 12,
    GPU_MV_QUEEN_PROMO_CAPTURE  = 15 << 12
};
typedef uint16_t gpu_mv_flag_t;

#endif /* GPU_CONST_H */
